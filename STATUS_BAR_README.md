# Статус Бар Подключения - Документация

## Обзор

Реализован статус бар для отображения состояния сетевого подключения в игре SeaBattle. Статус бар расположен под игровым полем, слева от кнопки выхода из игры.

## Архитектура

### Компоненты

1. **ConnectionStatus** (enum) - перечисление статусов подключения:
   - `Waiting` - Ожидание подключения (оранжевый цвет)
   - `Connected` - Успешное подключение (зелёный цвет)
   - `Error` - Ошибка подключения (красный цвет)
   - `Timeout` - Таймаут подключения (оранжевый тёмный)
   - `Disconnected` - Разрыв соединения (серый цвет)

2. **NetworkClient** - класс для управления сетевым подключением:
   - Управляет состоянием подключения
   - Уведомляет об изменении статуса через callback
   - Содержит методы для симуляции различных состояний

3. **GameScreen** - UI компонент:
   - Содержит QLabel `m_statusBar` для отображения статуса
   - Метод `setConnectionStatus()` для обновления статуса
   - Автоматическое изменение цвета и текста в зависимости от статуса

4. **MainWindow** - главное окно:
   - Создаёт и управляет экземпляром NetworkClient
   - Обрабатывает изменения статуса и обновляет UI
   - Демонстрирует работу при запуске игры

## Визуальное представление

Статус бар имеет следующие характеристики:
- Минимальная ширина: 250px
- Размер шрифта: 14px
- Отступы: 10px
- Скругление углов: 5px
- Цветовая кодировка по статусам

## Интеграция

### Подключение клиента

При запуске игры (`showGameScreen()`):
```cpp
m_networkClient->connectToServer("localhost", 12345);
```

### Обновление статуса

Автоматическое обновление через callback:
```cpp
m_networkClient->setStatusCallback([this](ConnectionStatus status) {
    QMetaObject::invokeMethod(this, [this, status]() {
        onConnectionStatusChanged(status);
    });
});
```

### Отключение

При выходе из игры (`onExitGameRequested()`):
```cpp
m_networkClient->disconnect();
```

## Демонстрация работы

Для демонстрации различных статусов можно использовать методы симуляции:
```cpp
// Получить доступ к сетевому клиенту
NetworkClient* client = mainWindow->getNetworkClient();

// Симулировать различные состояния
client->connectToServer("localhost", 12345);  // Waiting -> Connected
client->simulateTimeout();                     // Timeout
client->simulateError();                       // Error
client->simulateDisconnect();                  // Disconnected
```

## Расширяемость

Текущая реализация является заглушкой (stub) для будущей полноценной сетевой функциональности. При добавлении реального сетевого кода необходимо:

1. Заменить имитацию подключения в `NetworkClient::connectToServer()` на реальный сетевой код
2. Добавить обработку реальных сетевых событий
3. Связать изменения статуса с реальными событиями сокета
4. Добавить обработку ошибок и таймаутов

## Файлы

- `src/GameScreen.h` - определение ConnectionStatus и интерфейс GameScreen
- `src/GameScreen.cpp` - реализация статус бара и метода setConnectionStatus
- `src/NetworkClient.h` - интерфейс класса NetworkClient
- `src/NetworkClient.cpp` - реализация NetworkClient
- `src/MainWindow.h` - интеграция NetworkClient в главное окно
- `src/MainWindow.cpp` - обработчики изменения статуса

## Критерий приёмки

✅ Статус бар отображается под игровым полем, слева от кнопки выхода  
✅ Поддерживаются все требуемые статусы: ожидание, успех, ошибка, таймаут, разрыв  
✅ Интеграция с классом-клиентом (NetworkClient)  
✅ Автоматическое обновление статуса при изменении состояния подключения  
✅ Пользователь всегда видит актуальное состояние подключения  
